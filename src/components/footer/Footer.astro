---
// import { ThemeSwitch } from './ThemeSwitch'
// import {  footer } from '@/config.json'
import { getAllPostsWordCount } from '@/utils/content'
// import { RunningDays } from './RunningDays'
// import Link from './Link.astro'

// const sinceYear = new Date(footer.startTime).getFullYear()
// const thisYear = new Date().getFullYear()
// const copyDate = sinceYear === thisYear ? thisYear : `${sinceYear} - ${thisYear}`

const wordCount = await getAllPostsWordCount()

const wordCountStr = (wordCount / 1000).toFixed(1) + 'k'
---

<footer class="footer">
	<div class="waves">
		<div class="wave" id="wave1"></div>
		<div class="wave" id="wave2"></div>
		<div class="wave" id="wave3"></div>
		<div class="wave" id="wave4"></div>
	</div>

	<ul class="menu">
		<li class="menu__item">
			<a class="menu__link" href="#">å…±ç äº† {wordCountStr} é‚£ä¹ˆå¤šå­—</a>
		</li>
		<li class="menu__item"><a class="menu__link" href="/about">About us</a></li>
		<li class="menu__item">
			<a class="menu__link" href="https://astro.build/">ä½¿ç”¨äº†Astroåšå®¢æ¡†æ¶</a>
		</li>
		<li class="menu__item">
			<a href="https://travel.moe/go.html" target="_blank">
				<img
					src="https://travel.moe/images/logo/default-white.png"
					style="width:auto;height:24px"
					title="å¼‚æ¬¡å…ƒä¹‹æ—…-è·ƒè¿-æˆ‘ä»¬ä¸€èµ·å»èŒç«™æˆå‘˜çš„æ˜Ÿçƒæ—…è¡Œå§ï¼"
				/>
			</a>
		</li>
	</ul>
	<p><div class="quote">åŠ è½½ä¸­...</div></p>
	<p style="opacity: 0.75;">Made with ğŸ¤ by chenlin</p>
</footer>

<script>
	// é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è°ƒç”¨API
	document.addEventListener('DOMContentLoaded', () => {
		fetch('https://v1.hitokoto.cn/?encode=text')
			.then((response) => {
				if (!response.ok) throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥')
				return response.text()
			})
			.then((data) => {
				document.getElementsByClassName('quote')[0].textContent = data
			})
			.catch((error) => {
				document.getElementsByClassName('quote')[0].textContent = 'è·å–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•'
				console.error(error)
			})
	})
</script>
